@startuml

title UC06 - Especificar Tarefa

actor Colaborador 
participant ":EspecificarTarefaUI" as UI
participant ":EspecificarTarefaCTRL" as CTRL
participant ":Plataforma" as Plataforma
participant "rc:RepositorioCategoria" as RepositorioCategoria
participant "ro:RepositorioOrganizacao" as RepositorioOrganizacao
participant "rt:RepositorioTarefa" as RepositorioTarefa
participant "o:Organizacao" as Organizacao
participant "rc:RepositorioColaborador" as RepositorioColaborador

activate Colaborador
Colaborador -> UI: 1: Inicia a especificação de uma tarefa
activate UI
UI -> CTRL: 1.1: lc = getListaCategorias()
activate CTRL
CTRL -> Plataforma: 1.1.1: rc = getRepositorioCategoria()
activate Plataforma
deactivate Plataforma
CTRL -> RepositorioCategoria: 1.1.2 lc = getListaCategorias()
activate RepositorioCategoria
deactivate RepositorioCategoria
deactivate CTRL
UI --> Colaborador: 1.2: Solicita dados
deactivate UI

Colaborador -> UI: 2: Introduz dados
activate UI
UI -> CTRL: 2.1: novaTarefa (ref, designacao, descInformadl, \ndescTecnica, duracao, custo, catCod)
activate CTRL
ref over CTRL
CTRL -> CTRL: 2.1.1: email = getMyEmail()
end ref
CTRL -> Plataforma: 2.1.2: ro = getRepositorioOrganizacao
activate Plataforma
deactivate Plataforma
CTRL -> RepositorioOrganizacao: 2.1.3: o = getOrganizacaoByEmailUtilizador(email)
activate RepositorioOrganizacao
deactivate RepositorioOrganizacao
CTRL -> Organizacao: 2.1.4: rt = getRepositorioTarefa()
activate Organizacao
deactivate Organizacao
CTRL -> RepositorioCategoria: 2.1.5: cat = getCategoria(catCod)
activate RepositorioCategoria
deactivate RepositorioCategoria
CTRL -> Organizacao: 2.1.6: rc = getRepositorioColaborador()
activate Organizacao
deactivate Organizacao
CTRL -> RepositorioColaborador: 2.1.7: colab = getColaboradorByEmail(email)
activate RepositorioColaborador
deactivate RepositorioColaborador
CTRL -> RepositorioTarefa: 2.1.8: t = novaTarefa(ref, designacao, descInformal, descTecnica, duracao, custo, cat, colab)
activate RepositorioTarefa
RepositorioTarefa --> "t:Tarefa" **: 2.1.8.1: create(ref, designacao, descInformal, descTecnica, duracao, custo, cat, colab)
RepositorioTarefa -> RepositorioTarefa: 2.1.8.2: valida(t)
deactivate RepositorioTarefa
deactivate CTRL
UI --> Colaborador: 2.2: Apresenta dados e solicita confirmação
deactivate UI
Colaborador -> UI: 3: Confirma
activate UI
UI -> CTRL: 3.1: registaTarefa()
activate CTRL
CTRL -> RepositorioTarefa: 3.1.1: registaTarefa(t)
activate RepositorioTarefa
RepositorioTarefa -> RepositorioTarefa: 4: valida(t)
RepositorioTarefa -> RepositorioTarefa: 5: add(t)
deactivate RepositorioTarefa
deactivate CTRL
deactivate UI
deactivate Colaborador











@enduml
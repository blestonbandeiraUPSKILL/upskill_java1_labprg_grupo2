@startuml

title UC06 - Especificar Tarefa

actor Colaborador 
participant ":EspecificarTarefaUI" as UI
participant ":EspecificarTarefaCTRL" as CTRL
participant ":Plataforma" as Plataforma
participant "rc:RepositorioCategoria" as RepositorioCategoria
participant "ro:RepositorioOrganizacao" as RepositorioOrganizacao
participant "rt:RepositorioTarefa" as RepositorioTarefa
participant "o:Organizacao" as Organizacao
participant "rc:RepositorioColaborador" as RepositorioColaborador

activate Colaborador
Colaborador -> UI: 1: Inicia a especificação de uma tarefa
activate UI
UI -> CTRL: 1.1: lc = getListaCategorias()
activate CTRL
CTRL -> Plataforma: 1.1.1: rc = getRepositorioCategorias()
activate Plataforma
deactivate Plataforma
CTRL -> RepositorioCategorias: 1.1.2 lc = getListaCategorias()
activate RepositorioCategorias
deactivate RepositorioCategorias
deactivate CTRL
UI --> Colaborador: 1.2: Solicita dados
deactivate UI

Colaborador -> UI: 2: Introduz dados
activate UI
UI -> CTRL: 2.1: novaTarefa (ref, designacao, descInformadl, \ndescTecnica, duracao, custo, catCod)
activate CTRL
ref over CTRL
CTRL -> CTRL: 2.1.1: email = getMyEmail()
end ref
CTRL -> Plataforma: 2.1.2: ro = getRepositorioOrganizacoes
activate Plataforma
deactivate Plataforma
CTRL -> RepositorioOrganizacoes: 2.1.3: o = getOrganizacaoByEmailUtilizador(email)
activate RepositorioOrganizacoes
deactivate RepositorioOrganizacoes
CTRL -> Organizacao: 2.1.4: rt = getRepositorioTarefas()
activate Organizacao
deactivate Organizacao
CTRL -> RepositorioCategorias: 2.1.5: cat = getCategoria(catCod)
activate RepositorioCategorias
deactivate RepositorioCategorias
CTRL -> Organizacao: 2.1.6: rc = getRepositorioColaboradores()
activate Organizacao
deactivate Organizacao
CTRL -> RepositorioColaboradores: 2.1.7: colab = getColaboradorByEmail(email)
activate RepositorioColaboradores
deactivate RepositorioColaboradores
CTRL -> RepositorioTarefas: 2.1.8: t = novaTarefa(ref, designacao, descInformal, descTecnica, duracao, custo, cat, colab)
activate RepositorioTarefas
RepositorioTarefas --> "t:Tarefa" **: 2.1.8.1: create(ref, designacao, descInformal, descTecnica, duracao, custo, cat, colab)
RepositorioTarefas -> RepositorioTarefas: 2.1.8.2: valida(t)
deactivate RepositorioTarefas
deactivate CTRL
UI --> Colaborador: 2.2: Apresenta dados e solicita confirmação
deactivate UI
Colaborador -> UI: 3: Confirma
activate UI
UI -> CTRL: 3.1: registaTarefa()
activate CTRL
CTRL -> RepositorioTarefas: 3.1.1: registaTarefa(t)
activate RepositorioTarefas
RepositorioTarefas -> RepositorioTarefas: 4: valida(t)
RepositorioTarefas -> RepositorioTarefas: 5: add(t)
deactivate RepositorioTarefas
deactivate CTRL
deactivate UI
deactivate Colaborador











@enduml
@startuml

actor "Gestor da Organização"

activate "Gestor da Organização"
"Gestor da Organização" -> UI : 1: Inicia a especificação de um colaborador da Organização
activate UI
UI --> "Gestor da Organização": 1.1: Solicita os dados
deactivate UI
"Gestor da Organização" -> UI : 2: Introduz os dados
activate UI
UI -> CTRL : 2.1: novoColaborador(nome, funcao, telefone, email)
activate CTRL
CTRL -> Plataforma : 2.1.1: gu=getGestaoUtilizadoresFacade()
activate Plataforma
deactivate Plataforma
CTRL -> "gu: GestãoUtilizadoresFacade" : 2.1.2: sessao=getSessaoAtual()
activate "gu: GestãoUtilizadoresFacade"
UI -> "Gestor da Organização" : 2.2: Apresenta dados e solicita confirmação
deactivate UI
deactivate "gu: GestãoUtilizadoresFacade"
CTRL -> "sessao : SessaoUtilizador" : 2.1.3: email=getEmailUtilizador() 
activate "sessao : SessaoUtilizador"
deactivate "sessao : SessaoUtilizador"
CTRL -> Plataforma : 2.1.4: ro=getRegistoOrganizacoes()
activate Plataforma
deactivate Plataforma
CTRL -> "ro: RegistoOrganizacoes" : 2.1.5: o=getOrganizacaoByEmailUtilizador(email)
activate "ro: RegistoOrganizacoes"
deactivate "ro: RegistoOrganizacoes"
CTRL -> "o: Organizacao" : 2.1.6: c=novoColaborador(nome, funcao, telefone, email)
activate "o: Organizacao"
create "c: Colaborador"
"o: Organizacao" -> "c: Colaborador": 2.1.6.1: create (nome, funcao, telefone, email)
deactivate "o: Organizacao"
CTRL -> "o: Organizacao" : 2.1.7: validaColaborador(c)
deactivate CTRL
activate  "o: Organizacao" 
deactivate "o: Organizacao"
"Gestor da Organização" -> UI : 3: Confirma
activate UI
UI -> CTRL : 3.1: registaColaborador()
activate CTRL
CTRL -> Plataforma : 3.1.1: agp=getAlgoritmoGeradorPasswords()
activate Plataforma
deactivate Plataforma
CTRL -> "agp: getAlgoritmoGeradorPasswords" : 3.1.2: password=getPassword()
activate "agp: getAlgoritmoGeradorPasswords"
deactivate "agp: getAlgoritmoGeradorPasswords"
UI --> "Gestor da Organização": 3.2: Informa operação bem sucedida
deactivate UI
CTRL -> "o: Organizacao" : 3.1.3: registaColaborador(c)
"o: Organizacao" -> "o: Organizacao" : 3.1.3.1: validaColaborador(c)
"o: Organizacao" -> "o: Organizacao" : 3.1.3.2: addColaborador(c)
CTRL -> "gu: GestãoUtilizadoresFacade" : 3.1.4: registaUtilizadorComPapel(nome, email, password,"colaborador")
ref over CTRL
Email SD1
end ref

@enduml
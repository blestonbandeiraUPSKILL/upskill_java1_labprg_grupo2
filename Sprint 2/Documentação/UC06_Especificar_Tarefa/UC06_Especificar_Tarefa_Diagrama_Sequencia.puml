@startuml

title UC06 - Especificar Tarefa

actor Colaborador 
participant ":EspecificarTarefaUI" as EspecificarTarefaUI
participant ":EspecificarTarefaCTRL" as EspecificarTarefaCTRL
participant ":Plataforma" as Plataforma
participant "rc:RepositorioCategoria" as RepositorioCategoria
participant "ro:RepositorioOrganizacao" as RepositorioOrganizacao
participant "rt:RepositorioTarefa" as RepositorioTarefa
participant "o:Organizacao" as Organizacao
participant "rc:RepositorioColaborador" as RepositorioColaborador

activate Colaborador
Colaborador -> EspecificarTarefaUI: 1: Inicia a especificação de uma tarefa
activate EspecificarTarefaUI
EspecificarTarefaUI -> EspecificarTarefaCTRL: 1.1: lc = listaCategorias()
activate EspecificarTarefaCTRL
EspecificarTarefaCTRL -> Plataforma: 1.1.1: rc = getRepositorioCategoria()
activate Plataforma
deactivate Plataforma
EspecificarTarefaCTRL -> RepositorioCategoria: 1.1.2 lc = listaCategorias()
activate RepositorioCategoria
deactivate RepositorioCategoria
deactivate EspecificarTarefaCTRL
EspecificarTarefaUI --> Colaborador: 1.2: Solicita dados
deactivate EspecificarTarefaUI

Colaborador -> EspecificarTarefaUI: 2: Introduz dados
activate EspecificarTarefaUI
EspecificarTarefaUI -> EspecificarTarefaCTRL: 2.1: novaTarefa (ref, designacao, descInformadl, \ndescTecnica, duracao, custo, catCod)
activate EspecificarTarefaCTRL
ref over EspecificarTarefaCTRL
EspecificarTarefaCTRL -> EspecificarTarefaCTRL: 2.1.1: email = getMyEmail()
end ref
EspecificarTarefaCTRL -> Plataforma: 2.1.2: ro = getRepositorioOrganizacao
activate Plataforma
deactivate Plataforma
EspecificarTarefaCTRL -> RepositorioOrganizacao: 2.1.3: o = organizacaoByEmail(email)
activate RepositorioOrganizacao
deactivate RepositorioOrganizacao
EspecificarTarefaCTRL -> Organizacao: 2.1.4: rt = getRepositorioTarefa()
activate Organizacao
deactivate Organizacao
EspecificarTarefaCTRL -> RepositorioCategoria: 2.1.5: cat = categoria(catCod)
activate RepositorioCategoria
deactivate RepositorioCategoria
EspecificarTarefaCTRL -> Organizacao: 2.1.6: rc = getRepositorioColaborador()
activate Organizacao
deactivate Organizacao
EspecificarTarefaCTRL -> RepositorioColaborador: 2.1.7: colab = colaboradorByEmail(email)
activate RepositorioColaborador
deactivate RepositorioColaborador
EspecificarTarefaCTRL -> RepositorioTarefa: 2.1.8: t = novaTarefa(ref, designacao, descInformal, descTecnica, duracao, custo, cat, colab)
activate RepositorioTarefa
RepositorioTarefa --> "t:Tarefa" **: 2.1.8.1: create(ref, designacao, descInformal, descTecnica, duracao, custo, cat, colab)
RepositorioTarefa -> RepositorioTarefa: 2.1.8.2: valida(t)
deactivate RepositorioTarefa
deactivate EspecificarTarefaCTRL
EspecificarTarefaUI --> Colaborador: 2.2: Apresenta dados e solicita confirmação
deactivate EspecificarTarefaUI
Colaborador -> EspecificarTarefaUI: 3: Confirma
activate EspecificarTarefaUI
EspecificarTarefaUI -> EspecificarTarefaCTRL: 3.1: addTarefa()
activate EspecificarTarefaCTRL
EspecificarTarefaCTRL -> RepositorioTarefa: 3.1.1: addTarefa(t)
activate RepositorioTarefa
RepositorioTarefa -> RepositorioTarefa: 4: valida(t)
RepositorioTarefa -> RepositorioTarefa: 5: add(t)
deactivate RepositorioTarefa
deactivate EspecificarTarefaCTRL
deactivate EspecificarTarefaUI
deactivate Colaborador











@enduml
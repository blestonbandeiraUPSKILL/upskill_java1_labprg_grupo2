@startuml

title UC06 - Especificar Tarefa


actor Colaborador 
participant ":UI" as UI
participant ":CTRL" as CTRL
participant ":Plataforma" as Plataforma
participant "rc:RegistoCategorias" as RegistoCategorias
participant "ro:RegistoOrganizacoes" as RegistoOrganizacoes
participant "rt:RegistoTarefas" as RegistoTarefas
participant "o:Organizacao" as Organizacao
participant "rc:RegistoColaboradores" as RegistoColaboradores

activate Colaborador
Colaborador -> UI: 1: Inicia a especificação de uma tarefa
activate UI
UI -> CTRL: 1.1: lc = getListaCategorias()
activate CTRL
CTRL -> Plataforma: 1.1.1: rc = getRegistoCategorias()
activate Plataforma
deactivate Plataforma
CTRL -> RegistoCategorias: 1.1.2 lc = getListaCategorias()
activate RegistoCategorias
deactivate RegistoCategorias
deactivate CTRL
UI --> Colaborador: 1.2: Solicita dados
deactivate UI

Colaborador -> UI: 2: Introduz dados
activate UI
UI -> CTRL: 2.1: novaTarefa (ref, designacao, descrInformadl, \ndesctTecnica, duracao, custo, catCod)
activate CTRL
ref over CTRL
CTRL -> CTRL: 2.1.1: email = getMyEmail()
end ref
CTRL -> Plataforma: 2.1.2: ro = getRegistoOrganizacoes
activate Plataforma
deactivate Plataforma
CTRL -> RegistoOrganizacoes: 2.1.3: o = getOrganizacaoByEmailUtilizador(email)
activate RegistoOrganizacoes
deactivate RegistoOrganizacoes
CTRL -> Organizacao: 2.1.4: rt = getRegistoTarefas()
activate Organizacao
deactivate Organizacao
CTRL -> RegistoCategorias: 2.1.5: cat = getCategoria(catCod)
activate RegistoCategorias
deactivate RegistoCategorias
CTRL -> Organizacao: 2.1.6: rc = getRegistoColaboradores()
activate Organizacao
deactivate Organizacao
CTRL -> RegistoColaboradores: 2.1.7: colab = getColaboradorByEmail(email)
activate RegistoColaboradores
deactivate RegistoColaboradores
CTRL -> RegistoTarefas: 2.1.8: t = novaTarefa(ref, designacao, descrInformal, descrTecnica, duracao, custo, cat, colab)
activate RegistoTarefas
RegistoTarefas --> "t:Tarefa" **
RegistoTarefas -> RegistoTarefas: 2.1.8.2: valida(t)
deactivate RegistoTarefas
deactivate CTRL
UI --> Colaborador: 2.2: Apresenta dados e solicita confirmação
deactivate UI
Colaborador -> UI: 3: Confirma
activate UI
UI -> CTRL: 3.1: registaTarefa()
activate CTRL
CTRL -> RegistoTarefas: 3.1.1: registaTarefa(t)
activate RegistoTarefas
RegistoTarefas -> RegistoTarefas: 4: valida(t)
RegistoTarefas -> RegistoTarefas: 5: add(t)
deactivate RegistoTarefas
deactivate CTRL
deactivate UI
deactivate Colaborador











@enduml
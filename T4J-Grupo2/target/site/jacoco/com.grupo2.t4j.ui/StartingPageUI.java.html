<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="pt"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StartingPageUI.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">T4J-Grupo2</a> &gt; <a href="index.source.html" class="el_package">com.grupo2.t4j.ui</a> &gt; <span class="el_source">StartingPageUI.java</span></div><h1>StartingPageUI.java</h1><pre class="source lang-java linenums">package com.grupo2.t4j.ui;

import com.grupo2.t4j.controller.GestaoUtilizadoresController;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.fxml.Initializable;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.stage.Modality;
import javafx.stage.Stage;
import javafx.stage.Window;
import javafx.stage.WindowEvent;

import java.io.IOException;
import java.net.URL;
import java.sql.SQLException;
import java.util.ResourceBundle;

/**
 * FXML Controller class
 */
<span class="nc" id="L25">public class StartingPageUI implements Initializable {</span>

    private GestaoUtilizadoresController gestaoUtilizadoresController;
    private Stage adicionarStage;
    private Scene sceneRegistarOrganizacao;
    private Scene sceneGestor;
    private Scene sceneAdministrativo;
    private Scene sceneColaborador;
    private Scene sceneFreelancer;
    private Scene scene;

    @FXML TextField txtEmailLogin;
    @FXML PasswordField txtPasswordLogin;
    @FXML Button btnSair;
    @FXML Button btnLogin;
    @FXML Button btnGoDark;
    @FXML Button btnGoLight;
    
    @FXML Button btnRegistarOrganizacao;
    
    
    
<span class="nc" id="L47">    public String estilo = &quot;/com/grupo2/t4j/style/app.css&quot;;</span>

    /**
     * Initializes the controller (UI) class.
     */
    @Override
    public void initialize(URL location, ResourceBundle resources) {

<span class="nc" id="L55">        gestaoUtilizadoresController = new GestaoUtilizadoresController();</span>
        
<span class="nc" id="L57">        adicionarStage = new Stage();      </span>
             
<span class="nc" id="L59">        adicionarStage.initModality(Modality.APPLICATION_MODAL);;</span>
<span class="nc" id="L60">        adicionarStage.setResizable(false);</span>

<span class="nc" id="L62">    }</span>

    @FXML
    void cssGoDark(ActionEvent event) {

<span class="nc" id="L67">        Scene scene = btnGoDark.getScene();</span>
        
<span class="nc" id="L69">        estilo = &quot;/com/grupo2/t4j/style/dark.css&quot;;       </span>
        
<span class="nc" id="L71">        scene.getStylesheets().clear();</span>
<span class="nc" id="L72">        scene.getStylesheets().add(getClass().getResource(estilo).toExternalForm());</span>
<span class="nc" id="L73">    }</span>

    @FXML
    void cssGoLight(ActionEvent event) {

<span class="nc" id="L78">        Scene scene = btnGoLight.getScene();</span>
       
<span class="nc" id="L80">        estilo = &quot;/com/grupo2/t4j/style/app.css&quot;;</span>
            
<span class="nc" id="L82">        scene.getStylesheets().clear();</span>
<span class="nc" id="L83">        scene.getStylesheets().add(getClass().getResource(estilo).toExternalForm());</span>

<span class="nc" id="L85">    }</span>
       
    public void registarOrganizacao(ActionEvent actionEvent) {

        try {
<span class="nc" id="L90">            FXMLLoader loaderRegistarOrg = new FXMLLoader(getClass().getResource(&quot;/com/grupo2/t4j/fxml/RegistarOrgEGestorScene.fxml&quot;));</span>
<span class="nc" id="L91">            Parent rootRegistarOrg = loaderRegistarOrg.load();</span>
<span class="nc" id="L92">            sceneRegistarOrganizacao = new Scene(rootRegistarOrg);</span>
<span class="nc" id="L93">            RegistarOrgEGestorUI registarOrgEGestorUI = loaderRegistarOrg.getController();</span>
<span class="nc" id="L94">            registarOrgEGestorUI.associarParentUI(this);</span>

<span class="nc" id="L96">            adicionarStage.setScene(sceneRegistarOrganizacao);</span>
<span class="nc" id="L97">            adicionarStage.setTitle(&quot;Registar Organização&quot;);</span>
<span class="nc" id="L98">            adicionarStage.show();</span>

<span class="nc" id="L100">        } catch (IOException exception) {</span>
<span class="nc" id="L101">            exception.printStackTrace();</span>
<span class="nc" id="L102">            AlertsUI.criarAlerta(Alert.AlertType.ERROR,</span>
                    MainApp.TITULO_APLICACAO,
                    &quot;Erro&quot;,
<span class="nc" id="L105">                    exception.getMessage());</span>
<span class="nc" id="L106">        }</span>

<span class="nc" id="L108">    }</span>

    public void login(ActionEvent actionEvent) throws IOException, SQLException {

<span class="nc" id="L112">        boolean login = gestaoUtilizadoresController.login(</span>
<span class="nc" id="L113">                txtEmailLogin.getText(),</span>
<span class="nc" id="L114">                txtPasswordLogin.getText());</span>

        try {
<span class="nc bnc" id="L117" title="All 2 branches missed.">            if (login) {</span>
<span class="nc" id="L118">                txtEmailLogin.clear();</span>
<span class="nc" id="L119">                txtPasswordLogin.clear();</span>

<span class="nc bnc" id="L121" title="All 5 branches missed.">                switch (gestaoUtilizadoresController.getRole()) {</span>
                    case 1:
<span class="nc" id="L123">                        navigateAdministrativoLogado(actionEvent);</span>
<span class="nc" id="L124">                        break;</span>
                    case 2:
<span class="nc" id="L126">                        navigateColaboradorLogado(actionEvent);</span>
<span class="nc" id="L127">                        break;</span>
                    case 3:
<span class="nc" id="L129">                        navigateFreelancerLogado(actionEvent);</span>
<span class="nc" id="L130">                        break;</span>
                    case 4:
<span class="nc" id="L132">                        navigateGestorLogado(actionEvent);</span>
                        break;
                }
            }
<span class="nc" id="L136">        } catch (IOException exception) {</span>
<span class="nc" id="L137">            AlertsUI.criarAlerta(Alert.AlertType.ERROR,</span>
                    MainApp.TITULO_APLICACAO,
                    &quot;Erro ao validar os dados&quot;,
<span class="nc" id="L140">                    exception.getMessage());</span>

<span class="nc" id="L142">        }</span>
<span class="nc" id="L143">    }</span>

    public void sairApp(ActionEvent actionEvent) {
<span class="nc" id="L146">        Window window = btnSair.getScene().getWindow();</span>
<span class="nc" id="L147">        window.setOnCloseRequest(new EventHandler&lt;WindowEvent&gt;() {</span>
            @Override
            public void handle(WindowEvent windowEvent) {
<span class="nc" id="L150">                Alert alerta = AlertsUI.criarAlerta(Alert.AlertType.CONFIRMATION,</span>
                        MainApp.TITULO_APLICACAO,
                        &quot;Confirmação da acção&quot;,
                        &quot;Tem a certeza que quer sair da aplicação?&quot;);

<span class="nc bnc" id="L155" title="All 2 branches missed.">                if (alerta.showAndWait().get() == ButtonType.CANCEL) {</span>
<span class="nc" id="L156">                    windowEvent.consume();</span>
                }
<span class="nc" id="L158">            }</span>
        });
<span class="nc" id="L160">        window.fireEvent(new WindowEvent(window, WindowEvent.WINDOW_CLOSE_REQUEST));</span>
<span class="nc" id="L161">    }</span>

    public void navigateAdministrativoLogado(ActionEvent actionEvent) throws IOException {
        try {
<span class="nc" id="L165">            FXMLLoader loaderAdministrativo = new FXMLLoader(getClass().getResource(&quot;/com/grupo2/t4j/fxml/AdministrativoLogadoScene.fxml&quot;));</span>
<span class="nc" id="L166">            Parent rootAdministrativo = loaderAdministrativo.load();</span>
<span class="nc" id="L167">            sceneAdministrativo = new Scene(rootAdministrativo);</span>
<span class="nc" id="L168">            AdministrativoLogadoUI administrativoLogadoUI = loaderAdministrativo.getController();</span>
<span class="nc" id="L169">            administrativoLogadoUI.associarParentUI(this);</span>

<span class="nc" id="L171">            adicionarStage.setScene(sceneAdministrativo);</span>
<span class="nc" id="L172">            adicionarStage.setTitle(&quot;T4J - Administrativo&quot;);</span>
<span class="nc" id="L173">            adicionarStage.show();</span>
<span class="nc" id="L174">            btnLogin.getScene().getWindow().hide();</span>
<span class="nc" id="L175">        } catch (IOException exception) {</span>
<span class="nc" id="L176">            exception.printStackTrace();</span>
<span class="nc" id="L177">            AlertsUI.criarAlerta(Alert.AlertType.ERROR,</span>
                    MainApp.TITULO_APLICACAO,
                    &quot;Erro&quot;,
<span class="nc" id="L180">                    exception.getMessage());</span>
<span class="nc" id="L181">        }</span>
<span class="nc" id="L182">    }</span>

    public void navigateGestorLogado(ActionEvent actionEvent) {
        try {
<span class="nc" id="L186">            FXMLLoader loaderGestor = new FXMLLoader(getClass().getResource(&quot;/com/grupo2/t4j/fxml/GestorLogadoScene.fxml&quot;));</span>
<span class="nc" id="L187">            Parent rootGestor = loaderGestor.load();</span>
<span class="nc" id="L188">            sceneGestor = new Scene(rootGestor);</span>
<span class="nc" id="L189">            GestorLogadoUI gestorLogadoUI = loaderGestor.getController();</span>
<span class="nc" id="L190">            gestorLogadoUI.associarParentUI(this);</span>

<span class="nc" id="L192">            adicionarStage.setScene(sceneGestor);</span>
<span class="nc" id="L193">            adicionarStage.setTitle(&quot;T4J - Gestor da Organização&quot;);</span>
<span class="nc" id="L194">            adicionarStage.show();</span>

<span class="nc" id="L196">            btnLogin.getScene().getWindow().hide();</span>
<span class="nc" id="L197">        } catch (IOException exception) {</span>
<span class="nc" id="L198">            exception.printStackTrace();</span>
<span class="nc" id="L199">            AlertsUI.criarAlerta(Alert.AlertType.ERROR,</span>
                    MainApp.TITULO_APLICACAO,
                    &quot;Erro&quot;,
<span class="nc" id="L202">                    exception.getMessage());</span>
<span class="nc" id="L203">        }</span>
<span class="nc" id="L204">    }</span>

    public void navigateColaboradorLogado(ActionEvent actionEvent) {
        try {
<span class="nc" id="L208">            FXMLLoader loaderColaborador = new FXMLLoader(getClass().getResource(&quot;/com/grupo2/t4j/fxml/ColaboradorLogadoScene.fxml&quot;));</span>
<span class="nc" id="L209">            Parent rootColaborador = loaderColaborador.load();</span>
<span class="nc" id="L210">            sceneColaborador = new Scene(rootColaborador);</span>
<span class="nc" id="L211">            ColaboradorLogadoUI colaboradorLogadoUI = loaderColaborador.getController();</span>
<span class="nc" id="L212">            colaboradorLogadoUI.associarParentUI(this);</span>

<span class="nc" id="L214">            adicionarStage.setScene(sceneColaborador);</span>
<span class="nc" id="L215">            adicionarStage.setTitle(&quot;T4J - Colaborador&quot;);</span>
<span class="nc" id="L216">            adicionarStage.show();</span>

<span class="nc" id="L218">            btnLogin.getScene().getWindow().hide();</span>
<span class="nc" id="L219">        } catch (IOException exception) {</span>
<span class="nc" id="L220">            exception.printStackTrace();</span>
<span class="nc" id="L221">            AlertsUI.criarAlerta(Alert.AlertType.ERROR,</span>
                    MainApp.TITULO_APLICACAO,
                    &quot;Erro&quot;,
<span class="nc" id="L224">                    exception.getMessage());</span>
<span class="nc" id="L225">        }</span>
<span class="nc" id="L226">    }</span>

    public void navigateFreelancerLogado(ActionEvent actionEvent) throws IOException {
        try {
<span class="nc" id="L230">            FXMLLoader loaderFreelancer = new FXMLLoader(getClass().getResource(&quot;/com/grupo2/t4j/fxml/FreelancerLogadoScene.fxml&quot;));</span>
<span class="nc" id="L231">            Parent rootFreelancer = loaderFreelancer.load();</span>
<span class="nc" id="L232">            sceneFreelancer = new Scene(rootFreelancer);</span>
<span class="nc" id="L233">            FreelancerLogadoUI freelancerLogadoUI = loaderFreelancer.getController();</span>
<span class="nc" id="L234">            freelancerLogadoUI.associarParentUI(this);</span>
            
<span class="nc" id="L236">            adicionarStage.setScene(sceneFreelancer);</span>
<span class="nc" id="L237">            adicionarStage.setTitle(&quot;T4J - Freelancer&quot;);</span>
<span class="nc" id="L238">            adicionarStage.show();</span>
<span class="nc" id="L239">            btnLogin.getScene().getWindow().hide();</span>
<span class="nc" id="L240">        } catch (IOException exception) {</span>
<span class="nc" id="L241">            exception.printStackTrace();</span>
<span class="nc" id="L242">            AlertsUI.criarAlerta(Alert.AlertType.ERROR,</span>
                    MainApp.TITULO_APLICACAO,
                    &quot;Erro&quot;,
<span class="nc" id="L245">                    exception.getMessage());</span>
<span class="nc" id="L246">        }</span>
<span class="nc" id="L247">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>